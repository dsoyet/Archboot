# Created by Tobias Powalowski <tpowa@archlinux.org>

install ()
{
    MODULES=""
    BINARIES="clamscan freshclam"
    FILES=""
    SCRIPT=""
    # add /var directories
    add_dir "/var/run/clamav"
    add_dir "/var/lib/clamav"
    add_dir "/var/log/clamav"
    add_file "/usr/share/archboot/clamav/etc/clamav/freshclam.conf" "/etc/clamav/freshclam.conf"
    # get latest virus definitions
    CLAMAV=$(mktemp -d /tmp/clamav.XXXX)
    chmod 777 $CLAMAV
    freshclam --config-file=/usr/share/archboot/clamav/etc/clamav/freshclam.conf --datadir=$CLAMAV
    add_file "$CLAMAV/mirrors.dat" "/var/lib/clamav/mirrors.dat"
    add_file "$CLAMAV/main.cvd" "/var/lib/clamav/main.cvd"
    add_file "$CLAMAV/daily.cvd" "/var/lib/clamav/daily.cvd"
}

help ()
{
cat<<HELPEOF
  This hook includes clamav on an arch boot image.
HELPEOF
} 
