# Created by Tobias Powalowski <tpowa@archlinux.org>

install ()
{
    MODULES=""
    BINARIES="pam_tally unix_chkpwd"
    FILES=""
    SCRIPT=""
    for i in $(echo /usr/share/archboot/pam/etc/*/*); do
    	add_file "$i" "$(echo $i | sed -e 's|/usr/share/archboot/pam/etc|/etc|g')"
    done
    add_file "/usr/share/archboot/pam/etc/environment" "/etc/environment"
    for i in $(echo /lib/libpam*); do
    	add_file "$i"
    done
    for i in $(echo /lib/security/pam_*.so); do
    	add_file "$i"
    done
    for i in $(echo /lib/security/pam_filter/*); do
    	add_file "$i"
    done
    #fix cracklib support!
    add_file /usr/lib/libcrack.so.2
}

help ()
{
cat<<HELPEOF
  This hook includes the pam on an arch boot image.
HELPEOF
} 