#!/bin/bash
# Created by Tobias Powalowski <tpowa@archlinux.org>

build ()
{
    add_checked_modules '/drivers/isdn/'
    apps="/usr/sbin/hisaxctrl /usr/sbin/icnctrl /usr/sbin/imon /usr/sbin/imontty /usr/sbin/ipppd /usr/sbin/ipppstats /usr/sbin/isdnctrl /usr/sbin/isdnlog /usr/sbin/mkzonedb /usr/bin/isdnconf /usr/bin/isdnrate /usr/bin/isdnrep /usr/bin/capiinfo /usr/sbin/rcapid /usr/sbin/capiinit /usr/sbin/avmcapictrl"
    for i in $apps; do
        add_binary "$i"
    done
    add_file "/usr/share/archboot/isdn/etc/isdn/callerid.conf" "/etc/isdn/callerid.conf"
    add_file "/usr/share/archboot/isdn/etc/isdn/isdn.conf" "/etc/isdn/isdn.conf"
    add_file "/usr/share/archboot/isdn/etc/isdn/isdnlog.isdnctrl0.options" "/etc/isdn/isdnlog.isdnctrl0.options"
    add_file "/usr/share/archboot/isdn/etc/isdn/isdnlog.users" "/etc/isdn/isdnlog.users"
    add_file "/usr/share/archboot/isdn/etc/isdn/rate.conf" "/etc/isdn/rate.conf"
    add_file "/usr/share/archboot/isdn/etc/isdn/stop" "/etc/isdn/stop"
}

help ()
{
cat<<HELPEOF
  This hook includes the isdn subsystem on an arch boot image.
HELPEOF
}
