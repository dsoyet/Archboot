#!/usr/bin/env bash
# Created by Tobias Powalowski <tpowa@archlinux.org>

build ()
{
    add_binary "mdmon"
    # add custom archboot mdadm.conf to avoid mdadm handling isw and ddf metadata devices
    # which are also covered by dmraid
    add_file /etc/mdadm.conf
    # disable mdadm for dmraid devices
    echo "AUTO -imsm -ddf" >> "$BUILDROOT/etc/mdadm.conf"

    add_file "/usr/share/mdadm/mdcheck"

}

help ()
{
cat<<HELPEOF
  This hook adds complete mdadm to archboot image
  which is not covered by mdadm_udev hook.
HELPEOF
}
